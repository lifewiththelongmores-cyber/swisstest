<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Discover Your Human Design</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
  <section class="hero">
    <h1>Discover Your Human Design</h1>
    <p>Unlock the blueprint of your unique energetic signature. Explore your Type, Strategy, Authority, and the sacred geometry of your being.</p>
    <a href="#form-section" class="cta-button">Calculate Your Chart â†’</a>
  </section>

  <section id="form-section" class="container">
    <h2>Enter Your Birth Information</h2>
    <p class="sub">Your exact birth date, time, and location are essential for an accurate chart calculation.</p>
    <form id="chart-form">
      <label for="name">Full Name</label>
      <input type="text" id="name" name="name" placeholder="Your full name">

      <label for="birth-date">Birth Date</label>
      <input type="date" id="birth-date" required />

      <label for="birth-time">Birth Time</label>
      <input type="time" id="birth-time" name="birth-time" required />
      <small>Exact time is essential for an accurate chart</small>

      <label for="birth-location">Birth Location</label>
      <input type="text" id="birth-location" placeholder="City, Country" required />
      <small>Enter your birth city and country for timezone accuracy</small>

      <button type="submit">Generate My Chart</button>
    </form>
  </section>

  <section id="result" class="container"></section>

  <!-- Include local script logic -->
  <script type="module">
    import * as hdkit from './hdkit/index.js';

    window.hdkit = hdkit;

    document.getElementById('chart-form').addEventListener('submit', async function(e) {
      e.preventDefault();

      const date = document.getElementById('birth-date').value;
      const time = document.getElementById('birth-time').value;

      if (!date || !time) {
        alert("Please enter both date and time.");
        return;
      }

      const datetime = new Date(`${date}T${time}`);

      // For now, we use a placeholder location (you can upgrade this later)
      const location = {
        lat: 0,
        lon: 0
      };

      try {
        const chart = await hdkit.generateChart(datetime, location);

        document.getElementById('result').innerHTML = `
          <h2>Your Human Design</h2>
          <p><strong>Type:</strong> ${chart.type}</p>
          <p><strong>Strategy:</strong> ${chart.strategy}</p>
          <p><strong>Authority:</strong> ${chart.authority}</p>
          <p><strong>Defined Centers:</strong> ${chart.definedCenters?.join(', ')}</p>
        `;
      } catch (err) {
        console.error(err);
        document.getElementById('result').innerHTML = `<p>Something went wrong generating your chart. Please try again.</p>`;
      }
    });
  </script>
</body>
</html>
