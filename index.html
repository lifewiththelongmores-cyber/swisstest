<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Discover Your Human Design</title>

  <!-- Fonts & CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">

  <!-- UMD (browser-ready) version of hdkit -->
  <script src="https://unpkg.com/hdkit@latest/dist/hdkit.umd.js"></script>
</head>

<body>
  <section class="hero">
    <h1>Discover Your Human Design</h1>
    <p>Unlock the blueprint of your unique energetic signature. Explore your Type, Strategy, Authority, and the sacred geometry of your being.</p>
    <a href="#form-section" class="cta-button">Calculate Your Chart →</a>
  </section>

  <section id="form-section" class="container">
    <h2>Enter Your Birth Information</h2>
    <p class="sub">Your exact birth date, time, and location are essential for an accurate chart calculation.</p>

    <form id="chart-form">
      <label for="name">Full Name</label>
      <input type="text" id="name" name="name" placeholder="Your full name">

      <label for="birth-date">Birth Date</label>
      <input type="date" id="birth-date" required />

      <label for="birth-time">Birth Time</label>
      <input type="time" id="birth-time" name="birth-time" required />
      <small>Exact time is essential for an accurate chart</small>

      <label for="birth-location">Birth Location</label>
      <input type="text" id="birth-location" placeholder="City, Country" required />
      <small>Enter your birth city and country for timezone accuracy</small>

      <button type="submit">Generate My Chart</button>
    </form>

    <!-- Where the results show -->
    <div id="result"></div>
  </section>

  <!-- Working JS logic (after UMD script loads) -->
  <script>
    document.getElementById('chart-form').addEventListener('submit', async function(e) {
      e.preventDefault();

      const date = document.getElementById('birth-date').value;
      const time = document.getElementById('birth-time').value;
      const datetime = new Date(`${date}T${time}`);

      const location = { lat: 0, lon: 0 }; // TODO: Add real lat/lon lookup later

      try {
        const chart = await window.hdkit.generateChart(datetime, location);

        document.getElementById('result').innerHTML = `
          <h2>Your Human Design</h2>
          <p><strong>Type:</strong> ${chart.type}</p>
          <p><strong>Strategy:</strong> ${chart.strategy}</p>
          <p><strong>Authority:</strong> ${chart.authority}</p>
          <p><strong>Defined Centers:</strong> ${chart.definedCenters?.join(', ') || 'None'}</p>
        `;
      } catch (error) {
        console.error('Chart generation failed:', error);
        document.getElementById('result').innerHTML = `
          <p>Sorry, we couldn’t generate your chart. Try again or check the console for errors.</p>
        `;
      }
    });
  </script>
</body>
</html>
